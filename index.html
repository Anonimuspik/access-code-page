<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Get Access Key</title>
<style>
	body {
		margin: 0;
		height: 100vh;
		background: 
			linear-gradient(rgba(0,0,0,0.65), rgba(0,0,0,0.65)),
			url("bg.jpg") center center / cover no-repeat fixed;
		font-family: Arial, sans-serif;
		display: flex;
		justify-content: center;
		align-items: center;
		color: white;
	}

	.box {
		background: rgba(0,0,0,0.75);
		padding: 25px;
		border-radius: 10px;
		width: 320px;
		text-align: center;
		box-shadow: 0 0 20px rgba(0,0,0,0.8);
	}

	button {
		width: 100%;
		padding: 12px;
		margin-top: 10px;
		background: #e53935;
		border: none;
		color: white;
		font-size: 16px;
		cursor: pointer;
		border-radius: 6px;
	}

	button:hover {
		background: #ff3d3d;
	}

	#key {
		margin-top: 15px;
		font-size: 15px;
		word-break: break-all;
		color: #aaffaa;
	}
</style>

</head>
<body>

<div class="box">
	<h2>Access Key</h2>
	<button onclick="generate()">GET KEY</button>
	<div id="key"></div>
</div>

<script>
function r(len){
	const c="ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz23456789";
	let o="";
	for(let i=0;i<len;i++) o+=c[Math.floor(Math.random()*c.length)];
	return o;
}

function generate(){
	const formats=[
		()=>`LL-${Date.now()}-${r(4)}`,
		()=>`${r(2)}-${Date.now().toString(36)}-${r(4)}`,
		()=>`${r(3)}-${r(5)}-${Date.now().toString(36)}`,
		()=>`${r(4)}-${Date.now()}-${r(2)}${r(2)}`
	];
	const key=formats[Math.floor(Math.random()*formats.length)]();

	// ❌ предыдущий ключ убивается навсегда
	const last=localStorage.getItem("lastKey");
	if(last) localStorage.setItem("used_"+last,"1");

	localStorage.setItem("lastKey",key);
	document.getElementById("key").innerText=key;
}
</script>

</body>
</html>
